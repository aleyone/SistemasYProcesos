package es.syp3.aev3;

public class Minero implements Runnable {
	private int bolsa;
	private int tiempoExtraccion;
	Mina mina;

	public Minero(Mina mina) {
		this.bolsa = 0;
		this.mina = mina;
	}

	public void run() {
		int extraccion = 1;
		String nombre = Thread.currentThread().getName();
		extraerRecurso(nombre, extraccion);
		}

	synchronized public void extraerRecurso(String nombre, int extraccion) {
		while (true) {
			if (extraccion <= mina.getStock()) {
				mina.setStock(mina.getStock() - extraccion);
				this.setBolsa(extraccion);
				for (int i = 0; i < 1e7; i++) {
					double resultadoTonto = Math.sqrt((double)(i));
					}
				descansar();
								
			System.out.println("El minero " + nombre + " ha extraido " + extraccion + " monedas.");
			
			//	System.out.println("La bolsa de "+nombre+" tiene: "+bolsa+" monedas.");
				// "+mina.getStock());

			} else {
				System.out.println("La bolsa de "+nombre+" tiene: "+bolsa+" monedas.");
			//	System.out.println("No hay nada pa rascar.");
				break;
			}
			
		}
	}
	
	public void setBolsa(int extraccion) {
		this.bolsa = this.bolsa + extraccion;
	}

	public int getBolsa() {
		System.out.println(this.bolsa);
		return this.bolsa;
	}
	
	synchronized public void descansar() {
		try {
			Thread.sleep(2000);
		} catch (InterruptedException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
	}
}
